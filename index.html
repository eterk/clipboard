<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <script type="text/javascript" src="js/plugin.js"></script>
    <script type="text/javascript" src="js/html2canvas.min.js"></script>
    <script>

        function saveItem() {

            const div = getPicsDiv()

            // document.getElementById('pictures').scrollHeight
            const fullPageHeight = document.documentElement.scrollHeight;
            const fullPageWeight = document.documentElement.scrollWidth;
            const height = div.scrollHeight;
            const width = div.scrollWidth+ 20; 
            // 创建一个虚拟的 canvas 元素，用于绘制完整页面
            const canvas = document.createElement("canvas");
            canvas.width = width; // 设置 canvas 宽度为当前窗口宽度
            canvas.height = height; // 设置 canvas 高度为整个页面高度

            // 获取整个页面的内容
            // const fullPageContext = fullPageCanvas.getContext("2d");

            html2canvas(div, canvas)
                .then(canvas => {
                    return canvas.toDataURL("image/png");
                })
                .then(base64 => {
                    eagle.window.hide();
                    clearAll();
                    console.log("clear container");
                    return eagle.item.addFromBase64(base64, getItemInfo("input-panel"))
                })
        }

    </script>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <div id="input-panel">
        <div id="pictures"></div>
        <input type="text" name="name" placeholder="文件名"><br>
        <input type="text" name="annotation" placeholder="添加注释"><br>
        <input type="text" name="website" placeholder="http://"><br>
        <input type="text" name="tags" placeholder="标签之间用','分割"><br>
        <!-- <input type="text" name="folders"><br>  -->
        <button onclick="shotAndRead()">截图</button>
        <button onclick="saveItem()">保存</button>
        <button onclick="windowHide()">关闭</button>
        <button onclick="clearAll()">清理</button>
        <!-- <div id="footer">
            <div class="footer-item">
                <img src="github.png" alt="GitHub">
                <a href="https://github.com/eterk" target="_blank">GitHub</a>
            </div>
            <div class="footer-item">
                <img src="email.png" alt="Email">
                <a href="mailto:your-email@example.com" target="_blank">moshenwuji@live.com</a>
            </div>
            <div class="footer-item">
                <img src="logo.png" alt="Info">
                <a href="https://github.com/eterk/clipboard" target="_blank">clipboard 1.00</a>
            </div>
        </div> -->
    </div>


</body>

</html>